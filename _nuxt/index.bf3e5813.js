import{c as L,_ as T}from"./index.5b9cc3b8.js";import{f as I,g as x,s as b,r as $,h as B,q as S,i as D,o,c as i,j as c,d as _,a as n,v as E,F as V,k as M,t as p,l as j,b as C}from"./entry.6baa216c.js";import{i as O,j as P,B as q,k as A}from"./cosmos.2a4bffaa.js";import{u as K}from"./wallet.17046e5d.js";const R=n("h2",null,"View my NFTs",-1),Y={key:0},W={key:1},z={key:0},G={key:1},H=n("thead",null,[n("tr",null,[n("th",null,"#"),n("th",null,"NFT information"),n("th",null,"Your Listing")])],-1),J=["src"],Q=n("br",null,null,-1),U=n("br",null,null,-1),X=n("br",null,null,-1),Z=["onClick"],ee={key:0},ne=["onClick"],te=["onClick"],se=["onClick"],re=I({__name:"index",setup(ae){const v=x(),g=K(),{wallet:l,signer:f}=b(g),r=$({});B(async()=>{l.value||await u(),l.value&&k()}),S(l,t=>{t&&k()});const{connect:u}=g;function d(t,a){return`${t}_${a}`}async function k(){const[t,a]=await Promise.all([O(l.value),P({creator:l.value})]);t.forEach(s=>{r.value[d(s.classId,s.id)]=s}),a.forEach(s=>{const e=r.value[d(s.class_id,s.nft_id)];e.price=s.price,e.expiration=s.expiration})}async function m(t){v.push({path:`/listings/${t}`})}async function y(t,a){v.push({path:`/sell/${t}/${a}`})}async function N(t,a){if((!l.value||!f.value)&&await u(),!l.value||!f.value)return;const s=await A(t,a,f.value,l.value);console.log(s);const e=r.value[d(t,a)];e.price=null,e.expiration=null}const w=D(()=>Object.values(r.value).sort((t,a)=>{if(t.price&&a.price){const s=Date.parse(t.expiration),e=Date.parse(a.expiration);return s<e?-1:s>e?1:0}return t.price?-1:a.price?1:0}));return(t,a)=>{const s=T;return o(),i("div",null,[R,c(l)?(o(),i("section",W,[c(w).length?(o(),i("table",G,[H,n("tbody",null,[(o(!0),i(V,null,M(c(w),(e,F)=>(o(),i("tr",{key:d(e.classId,e.id)},[n("td",null,"#"+p(F+1),1),n("td",null,[n("h4",null,p(e.data.metadata.name),1),e.data.metadata.image?(o(),i("img",{key:0,src:("convertImageSrc"in t?t.convertImageSrc:c(L))(e.data.metadata.image),width:"64",height:"64"},null,8,J)):j("",!0),Q,_(" Class ID: "),C(s,{"class-id":e.classId},null,8,["class-id"]),U,_(" NFT ID: "),C(s,{"class-id":e.classId,"nft-id":e.id},null,8,["class-id","nft-id"]),X,n("button",{onClick:h=>m(e.classId)},"View NFT Class Listing",8,Z)]),n("td",null,[e.price?(o(),i("section",ee,[n("div",null,p(new c(q)(e.price).shiftedBy(-9).toFixed())+"LIKE",1),n("div",null,"till "+p(e.expiration),1),n("button",{onClick:h=>y(e.classId,e.id)},"Edit",8,ne),n("button",{onClick:h=>N(e.classId,e.id)},"Cancel",8,te)])):(o(),i("button",{key:1,onClick:h=>y(e.classId,e.id)},"Sell",8,se))])]))),128))])])):(o(),i("div",z,"You don't own any NFT on LikeCoin chain"))])):(o(),i("div",Y,[_("Please "),n("a",{href:"#",onClick:a[0]||(a[0]=E((...e)=>c(u)&&c(u)(...e),["prevent"]))},"connect"),_(" wallet")]))])}}});export{re as default};
