import{c as F,_ as L}from"./index.6f1f47e5.js";import{a as T,b,v as I,r as $,e as B,x as D,f as E,h as o,u as c,l as _,i as n,y as V,F as S,j as M,o as i,t as p,k as O,m as C}from"./entry.66d368a4.js";import{n as P,o as j,B as A,p as K}from"./cosmos.04f9d3c0.js";import{u as R}from"./wallet.031c2a45.js";const Y=n("h2",null,"View my NFTs",-1),q={key:0},W={key:1},z={key:0},G={key:1},H=n("thead",null,[n("tr",null,[n("th",null,"#"),n("th",null,"NFT information"),n("th",null,"Your Listing")])],-1),J=["src"],Q=n("br",null,null,-1),U=n("br",null,null,-1),X=n("br",null,null,-1),Z=["onClick"],ee={key:0},ne=["onClick"],te=["onClick"],se=["onClick"],re=T({__name:"index",setup(ae){const v=b(),g=R(),{wallet:l,signer:f}=I(g),r=$({});B(async()=>{l.value||await u(),l.value&&k()}),D(l,t=>{t&&k()});const{connect:u}=g;function d(t,a){return`${t}_${a}`}async function k(){const[t,a]=await Promise.all([P(l.value),j({creator:l.value})]);t.forEach(s=>{r.value[d(s.classId,s.id)]=s}),a.forEach(s=>{const e=r.value[d(s.class_id,s.nft_id)];e.price=s.price,e.expiration=s.expiration})}async function N(t){v.push({path:`/listings/${t}`})}async function y(t,a){v.push({path:`/sell/${t}/${a}`})}async function m(t,a){if((!l.value||!f.value)&&await u(),!l.value||!f.value)return;const s=await K(t,a,f.value,l.value);console.log(s);const e=r.value[d(t,a)];e.price=null,e.expiration=null}const w=E(()=>Object.values(r.value).sort((t,a)=>{if(t.price&&a.price){const s=Date.parse(t.expiration),e=Date.parse(a.expiration);return s<e?-1:s>e?1:0}return t.price?-1:a.price?1:0}));return(t,a)=>{const s=L;return i(),o("div",null,[Y,c(l)?(i(),o("section",W,[c(w).length?(i(),o("table",G,[H,n("tbody",null,[(i(!0),o(S,null,M(c(w),(e,x)=>(i(),o("tr",{key:d(e.classId,e.id)},[n("td",null,"#"+p(x+1),1),n("td",null,[n("h4",null,p(e.data.metadata.name),1),e.data.metadata.image?(i(),o("img",{key:0,src:c(F)(e.data.metadata.image),width:"64",height:"64"},null,8,J)):O("",!0),Q,_(" Class ID: "),C(s,{"class-id":e.classId},null,8,["class-id"]),U,_(" NFT ID: "),C(s,{"class-id":e.classId,"nft-id":e.id},null,8,["class-id","nft-id"]),X,n("button",{onClick:h=>N(e.classId)},"View NFT Class Listing",8,Z)]),n("td",null,[e.price?(i(),o("section",ee,[n("div",null,p(new c(A)(e.price).shiftedBy(-9).toFixed())+"LIKE",1),n("div",null,"till "+p(e.expiration),1),n("button",{onClick:h=>y(e.classId,e.id)},"Edit",8,ne),n("button",{onClick:h=>m(e.classId,e.id)},"Cancel",8,te)])):(i(),o("button",{key:1,onClick:h=>y(e.classId,e.id)},"Sell",8,se))])]))),128))])])):(i(),o("div",z,"You don't own any NFT on LikeCoin chain"))])):(i(),o("div",q,[_("Please "),n("a",{href:"#",onClick:a[0]||(a[0]=V((...e)=>c(u)&&c(u)(...e),["prevent"]))},"connect"),_(" wallet")]))])}}});export{re as default};
