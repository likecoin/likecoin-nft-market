import{c as E,_ as T}from"./index.6f1f47e5.js";import{_ as x}from"./UserLink.vue_vue_type_script_setup_true_lang.2a60c831.js";import{a as S,b as V,r as k,e as I,f as M,h as l,u as n,i as t,F as R,j as D,k as w,o as i,t as c,l as d,m as u}from"./entry.66d368a4.js";import{g as P,a as j,B as z}from"./cosmos.04f9d3c0.js";import{u as K}from"./metadata.d863c358.js";const O={key:0},U=t("h2",null,"Recent NFT Listings",-1),q=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"NFT information"),t("th",null,"Listing Price")])],-1),A=["src"],G=t("br",null,null,-1),H=t("br",null,null,-1),J=t("br",null,null,-1),Q=["onClick"],W=["onClick"],nt=S({__name:"index",setup(X){const N=V(),o=k([]),_=k([]),y=K(),{getClassMetadataById:r,lazyFetchClassMetadata:C}=y;I(async()=>{o.value=await P(),_.value=await j(),await Promise.all(o.value.map(a=>C(a.class_id)))});const b=M(()=>{const a=new Set(_.value.map(e=>`${e.message.class_id}_${e.message.nft_id}_${e.message.seller}`));return o.value.filter(e=>!a.has(`${e.class_id}_${e.nft_id}_${e.creator}`))});function m(a){N.push({path:`/listings/${a}`})}return(a,e)=>{const f=T,F=x;return i(),l("div",null,[n(o).length?(i(),l("section",O,[U,t("table",null,[q,t("tbody",null,[(i(!0),l(R,null,D(n(b),(s,L)=>{var h,g,p,v,$;return i(),l("tr",{key:`${s.class_id}_${s.nft_id}`},[t("td",null,"#"+c(L+1),1),t("td",null,[t("div",null,[t("h4",null,c((h=n(r)(s.class_id))==null?void 0:h.name),1),(v=(p=(g=n(r)(s.class_id))==null?void 0:g.data)==null?void 0:p.metadata)!=null&&v.image?(i(),l("img",{key:0,src:n(E)(($=n(r)(s.class_id).data)==null?void 0:$.metadata.image),height:"64",width:"64"},null,8,A)):w("",!0),G,d(" Class ID: "),u(f,{"class-id":s.class_id},null,8,["class-id"]),H,d(" NFT ID: "),u(f,{"class-id":s.class_id,"nft-id":s.nft_id},null,8,["class-id","nft-id"]),J,d(" Owner: "),u(F,{wallet:s.creator},null,8,["wallet"])]),t("button",{onClick:B=>m(s.class_id)},"View NFT Class Listing",8,Q)]),t("td",null,[t("section",null,[t("div",null,c(new n(z)(s.price).shiftedBy(-9).toFixed())+"LIKE",1),t("div",null,"till "+c(s.expiration),1)]),t("button",{onClick:B=>m(s.class_id)},"View",8,W)])])}),128))])])])):w("",!0)])}}});export{nt as default};
