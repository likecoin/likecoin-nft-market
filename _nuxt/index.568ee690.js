import{g as E,a as T,c as x,B as S,_ as V}from"./index.6880536b.js";import{_ as I}from"./UserLink.vue_vue_type_script_setup_true_lang.5eb063b4.js";import{a as M,b as R,r as k,e as D,f as P,h as l,u as n,i as t,F as j,j as z,k as w,o as i,t as c,l as r,m as u}from"./entry.9dbada17.js";import{u as K}from"./metadata.be20e5ac.js";const O={key:0},U=t("h2",null,"Recent NFT Listings",-1),q=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"NFT information"),t("th",null,"Listing Price")])],-1),A=["src"],G=t("br",null,null,-1),H=t("br",null,null,-1),J=t("br",null,null,-1),Q=["onClick"],W=["onClick"],et=M({__name:"index",setup(X){const N=R(),o=k([]),_=k([]),y=K(),{getClassMetadataById:d,lazyFetchClassMetadata:C}=y;D(async()=>{o.value=await E(),_.value=await T(),await Promise.all(o.value.map(a=>C(a.class_id)))});const b=P(()=>{const a=new Set(_.value.map(e=>`${e.class_id}_${e.nft_id}_${e.seller}`));return o.value.filter(e=>!a.has(`${e.class_id}_${e.nft_id}_${e.creator}`))});function h(a){N.push({path:`/listings/${a}`})}return(a,e)=>{const f=V,F=I;return i(),l("div",null,[n(o).length?(i(),l("section",O,[U,t("table",null,[q,t("tbody",null,[(i(!0),l(j,null,z(n(b),(s,L)=>{var m,g,p,v,$;return i(),l("tr",{key:`${s.class_id}_${s.nft_id}`},[t("td",null,"#"+c(L+1),1),t("td",null,[t("div",null,[t("h4",null,c((m=n(d)(s.class_id))==null?void 0:m.name),1),(v=(p=(g=n(d)(s.class_id))==null?void 0:g.data)==null?void 0:p.metadata)!=null&&v.image?(i(),l("img",{key:0,src:n(x)(($=n(d)(s.class_id).data)==null?void 0:$.metadata.image),height:"64",width:"64"},null,8,A)):w("",!0),G,r(" Class ID: "),u(f,{"class-id":s.class_id},null,8,["class-id"]),H,r(" NFT ID: "),u(f,{"class-id":s.class_id,"nft-id":s.nft_id},null,8,["class-id","nft-id"]),J,r(" Owner: "),u(F,{wallet:s.creator},null,8,["wallet"])]),t("button",{onClick:B=>h(s.class_id)},"View NFT Class Listing",8,Q)]),t("td",null,[t("section",null,[t("div",null,c(new n(S)(s.price).shiftedBy(-9).toFixed())+"LIKE",1),t("div",null,"till "+c(s.expiration),1)]),t("button",{onClick:B=>h(s.class_id)},"View",8,W)])])}),128))])])])):w("",!0)])}}});export{et as default};
